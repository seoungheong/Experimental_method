# 공분산과 상관계수

> 연속적인 두 변수(속성)의 연관(상관)의 정도를 수치로 나타내기 위한 방법
> 
> 공분산 -> 같은 자료라도 측정단위에 따라 값이 달라짐
> 
> 상관계수 -> 측정단위 무관, 주로 사용됨
> 
> ex) 키와 몸무게가 어느 정도 상관이 있는가?, 소득과 저축의 관계는 어떠한가?
> 
> # 계산 방법 및 성질 
> 
> > 두 속성 x, y에 대한 자료가 n개의 착으로 얻어진 경우 두 자료의 공분산은 다음과 같이 정의함
> > 
> > ![image](https://user-images.githubusercontent.com/65435447/169236334-de9870e7-bc33-42ff-a863-e38babc04be8.png)
> > 
> > <출처: https://m.blog.naver.com/yunjh7024/220819816790>
> >
> > x가 증가(감소)할 때 y가 증가(감소): 공분산은 양의 값
> > 
> > x가 증가(감소)할 때 y가 감소(증가): 공분산은 음의 값
> >
> > 상관계수라고 하면 보통 피어슨(Pearson)의 선형상관계수를 말함
> >
> > 표본에서 얻은 상관계수는 보통 r로 표시하고, 다음과 같이 정의함
> >
> > ![image](https://user-images.githubusercontent.com/65435447/169237165-93c5da47-2ed5-43b0-9bd0-91aad190e198.png)
> >
> > <출처: https://www.sasbigdata.com/entry/stats-correlation-analysis-covariance-pearson-spearman-kendall>
> >
> > (s_x)^2과 (s_y)^2은 x_i및 y_i의 표본분산임
> >
> > #### 상관계수 r의 성질
> >
> > > -1 <= r <= 1의 값을 가짐
> > >
> > > x가 증가(감소) 할 때 y가 증가(감소)하면 상관관계수는 양의 값을 가짐
> > >
> > > x가 증가(감소) 할 때 y가 감소(증가)하면 상관관계수는 음의 값을 가짐
> > >
> > > 상관이 높을수록 상관계수의 절댓값이 1에 가까워짐
> > >
> > > (x_i, y_i)모든 점이 한 직선위에 존재하면 상관계수는 1 또는 -1의 값을 가짐
> > >
> > > 두 변수가 독립이면 표본에서 얻은 상관계수r은 0에 가까운 값을 가지며, 역은 성립하지 않는다.
> > > 
> > > -> 상관계수가 0(또는 0에 가까운 값) 이라고 하더라도 두 변수는 독립이 아닐 수 있음
> > 
>  
> #### 상관계수와 공분산의 특성 
>  
> > 두 자료 X와 Y의 공분산과 상관계수를 Cov(X, Y)와 Corr(X, Y)라고 표현하고 a, b, c, d를 상수라고 할 때 X와 Y의 선형변환( a!=0 , c!= 0)
> > 
> > X' = aX + b, Y' = cY + d
> > 
> > Cov(X',Y') = Cov(aX + b, cY + d) = acCov(X, Y) 
> > 
> > Corr(X', Y') = Corr(aX + b, cY + d) = (ac/|a||c|)Corr(X, Y)
> > 
> > 상관에 대한 측도로 제시하는 값은 상관계수가 단위에 무관하므로 더 좋음
> > 
> > 공분산은 고급 통계 분석에서 중간관정에 종종 나오는 값이므로 개념을 알아두면 좋음
> > 
> > 기본적으로 상관계수는 단위에 무관하나 앞의 선형변환에서 a나 c중 하나만 음수이면 원래 상관계수의 값의 크기는 그대로지만 부호가 바뀜
> > 
> > X와 Y의 상관계수가 0.6이면 X와 -Y, -2X + 1과 Y의 상관계수는 부호가 바뀌어 -0.6이 됨
> > 
> > 상관계수가 0이라도 두 변수의 관계가 없는 것이 아닐 수 있음
> > 
> > 두 변수가 독립이면 상관계수가 0(자료에서는 0에 가까운 값)이지만 상관계수가 0이라고 해서 두 변수가 독립이라고 할 수 없는 경우가 많음
> > 
> > 두 변수의 관계가 직선이 아닌 관계에 있는 경우에 많이 발생함 -> 반드시 산점도를 확인하여 직선 이외의 관계가 있는지 확인할 필요가 있음
> > 
>  
> #### 상관계수 추론
> 
>  X가 주어졌을 때 Y의 분포가 정규분포인 경우
>   
> > 모상관계수 p가 0인지 검정하는 문제 
> > 
> > 만약 x가 주어졌을 때 y의 분포가 정규분포이면 귀무가설 H_0:p=0를 검저하기 위해 다음 검정통계량을 사용 
> >
> > t = (n - 2)r/((1 - r^2)^1/2)
> >
> > 모상관계수 p가 0인지 검정하는 문제
> >
> > ![image](https://user-images.githubusercontent.com/65435447/169249874-ecab85a1-6899-473a-adfe-9a491330b856.png)
> >
>  
> #### Fisher 변환
> 
> > 표본의 크기 n이 충분이 클 때 1/2log(1+r/1-r)가 근사적인 정규분포를 따르는것
> >
> > 1/2log(1+r/1-r) ~ N(0, 1/n-3)
> >
> > 신뢰구간
> >
> > 1/2log(1+p/1-p) = 1/2log(1+r/1-r)+-z_(a/2)(1/n-3)^1/2
> >
> > 가설검정
> >
> > z = (1/2log(1+r/1-r)-1/2log(1+p_0/1-p_0)/(1/n-3)^1/2)
> >
> > ![image](https://user-images.githubusercontent.com/65435447/169251848-638fc7d0-dabe-42dc-9dfb-201db77fed62.png)
> 


























