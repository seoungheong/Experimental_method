# 요인 배치

# 이원배치 분산분석

> 반응 변수 y에 영향을 주는 설명변수가 두 개일 때 사용
> 
> 두 개의 범주형 설명변수가 종속변수에 영향을 미치는 경우 사용하는 분석 방법(Two way ANOVA)
> 
>ex
> > 일원배치 분산분석: 옥수수 수확량(반응변수)이 비료의 종류(한 개의 설명변수)에 따라 달라지는지 확인
> > 
> > 이원배치 분산분석: 옥수수 수확량 비료의 종류(첫 번째 설명변수)와 농약의 종류(두 번째 설명변수)에 따라 어떻게 달라지는지 확인
> > 
> > 두 개의 설명변수 -> 이원배치 분산분석
> 
> 다원배치 분산분석(k-way ANOVA)
> 
> > 설명변수의 개수가 k개인 경우
> 
> #### 자료의 형태
> 
>  > 이원배치법에서는 종속변수 y에 영향을 주는 두 개의 설명변수가 있음
>  > 일반적으로 요인A와 요인B라고 함
>  >
>  > ex)
>  > > 요인 A는 비료로 서로 다른 a개의 비료, 요인B는 농약이며 서로 다른 b개의 농약으로 옥수수 수확량이 비료와 농약에 따른 차이가 있는지 확인하는 경우
>  >
>  > 상호작용
>  >
>  > 상호작용 없음: 요인A의 수준이 바뀌더라도 B의 변화가 없는 경우
>  > 상호작용 있음: 요인A의 수준에 따라 B의 수준이 달라짐
>  
> #### 제곱합의 분해
> 
> > SST(총제곱합, 전체제곱합, Sum of Squares Total)
> > 
> > 자료 각각에서 전체 평균을 뺀 편차의 제곱을 구하며 이를 모두 합한 값
> 
> > 요인에 의한 주효과(Main Effect) 제곱합 SSA(Sum of Squares A)...
> > 
> > 요인 A와 요인 B에 의한 주효과 제곱
> > 두 제곱합은 각각 요인 A및 요인 B에 의한 차이가 있을수록 큰 값을 가진다.
> 
> > 두 요인 A와 B에 의한 상호작용 SSAB(상호작용제곱합; Sum of Squares AB)
> > 
> > A와 B의 상호작용에 의한 제곱합
> > 상호작용이 클수록 커짐
> 
> > SSE(오차제곱합, Sum of Squares Error)
> > 
> > 요인들에 의한 차이에 의해서 설명되지 않는 그룹 내 변동
> 
> SST = SSA + SSB + SSAB + SSE
> 
> > 각 제곱합의 자유도 
> > SST = abn - 1
> > 
> > SSA = a - 1
> > 
> > SSB = b - 1
> > 
> > SSAB = (a - 1)(b - 1)
> > 
> > SSE = ab(n - 1)
> 
> > 제곱합과 마찬가지로 자유도도 등호 성립
> > 
> > (abn - 1) = (a - 1) + (b - 1) + (a - 1)(b - 1) + ab(n - 1)
> 
> #### 평균제곱(Mean Square)
> 
> > 제곱합을 해당 자유도로 나눈 것
> >
> > MSA = SSA/(a - 1)
> >
> > MSB = SSB/(b - 1)
> >
> > MSAB = SSAB/(a - 1)(b - 1)
> >
> > MSE = SSE/ab(n - 1)
> >
> > SST의 평균제곱은 사용하지 않음
> 
> #### 가설 및 가설검정
> 
> > 이원배치 분산분석에서는 다음과 같이 검정할 가설이 있음
> > 
> > 세 개의 가설 검정
> > 
> > 1. 주효과 A에 의한 차이
> > 
> > 2. 주효과 B에 의한 차이
> > 
> > 3. 상호작용에 의한 차이
> 
> > 귀무 가설: -> 요인 A에 의한 평균에 차이가 없음
> > 
> >            -> 요인 B에 의한 평균에 차이가 없음
> >            
> >            -> 요인 A와 B의 상호작용 없음
> > .
> > 대립 가설: -> 적어도 한개는 다름
> > 
> >            -> 상호작용 있음
> 
> ![image](https://user-images.githubusercontent.com/65435447/167795534-ab0c627a-e6b5-4df0-8790-9dcd9b8be42c.png)
>
> #### 상호작용의 풀링(Pooling) 또는 반복수가 1인 경우
> 
> > 이원배치법에서 두 개의 주효과 및 상호작용에 대한 가설검정에서 상호작용에 대한 가설을 먼저 검정하고, 상호작용이 존재하지 않으면 이 부분을 오차로 간주하는것
> >
> > 상호작용이 존재하지 않는 경우 새로운 분산분석표 작성
> > 
> > 새 오차제곱합: 기존 오차제곱합과 상호작용 제곱합의 합
> > 
> > 새 오차제곱합의 자유도: 기존 오차제곱합의 자유도와 상호작용 오차제곱의 합
> > 
> > ![image](https://user-images.githubusercontent.com/65435447/167797191-b2877619-666e-4838-be1e-544c6abf46a4.png)
> > .
> 
> 
> 
> 
> 
> .
